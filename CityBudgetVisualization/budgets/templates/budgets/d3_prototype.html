<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/1.4.5/numeral.min.js"></script>

    <style type="text/css">
        .chart div {
          font: 10px sans-serif;
          background-color: steelblue;
          text-align: left;
          padding: 3px;
          margin: 1px;
          color: white;
        }

        .chart rect {
          fill: steelblue;
        }

        .chart text {
          fill: white;
          font: 10px sans-serif;
          text-anchor: end;
        }
    </style>
</head>
<body>
    
    <span style="display:inline-block;">Chart for:</span>
    <span style="display:inline-block;" class="chart-name"></span>
    <div class="chart">
    </div>

    <script type="text/javascript">
    var generalBudget = 1008769685;
    var generalRevenue = 1008009915;
    var chartWidthPixels = 500;
    var data = [
        {
            name: "General Fund",
            budget: "1008769685",
            revenue: "1008009915",
        },
        {
            name: "Airport Customer Facility and Transportation Fee Fund",
            budget: "18364205",
            revenue: "19229246",
        }
    ]

    function getWidth(count) {
        return
    }

    var updateDisplayData = function(name, dataToSet) {
        if (!dataToSet) return;

        var chartElement = $(".chart");
        var chartName = $(".chart-name");
        chartName.text(name);

        while (chartElement.children().length > 0) {
            chartElement.children()[0].remove();
        }
       d3.select(".chart")
      .selectAll("div")
        .data(dataToSet)
      .enter().append("div")
        .style("width", function(d) { return d.count * 10 + "px"; })
        .attr("name", function(d) {return d.name;})
        .on("click", function(d){
            alert(d.name + "\nBudgeted: $" + numeral(d.budget).format('0,0') + "\nRevenue: $" + numeral(d.revenue).format('0,0'));
            // updateDisplayData(d.name, makeDataArray(d.count))
        })
        .text(function(d) { return d.name; });
    }
    updateDisplayData("San Jose Budget", data);

        
    </script>
</body>